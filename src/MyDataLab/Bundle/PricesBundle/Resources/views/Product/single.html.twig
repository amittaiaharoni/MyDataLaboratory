{% extends 'MyDataLabAdminBundle::base.html.twig' %}
{% block title %}Single Product Page{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-body">
                    <div class="box-header">
                        <button class="btn btn-default" onclick="goBack()"><i class="fa fa-caret-left"></i> Go Back</button>
                        <button class="btn btn-default" type="button" style="margin-left:10px;" id="test2">{% filter title %}{% trans %}CLEAR_ALL_FILTERS{% endtrans %}{% endfilter %}</button>
                    </div>
                    <div id="tables_selectbox" style="min-height:200px;">
                        <div class="col-md-2 col-sm-6 col-xs-12">
                            <img src="{{ asset('bundles/mydatalabadmin/img/products/lacoste.png') }}" alt="LaCoste" height="150" width="150">
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <span class="product-name">Perfume 1 - Lacoste</span>
                            </div>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <span class="product-price">60,90 €</span>
                            </div>
                            <div class="col-md-8 col-xs-12">
                                <span id="sparkline2"></span>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <div id="product_chart_div2" style="width: 100%; min-height: 280px; background:white"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-body">
                    <div class="box-header">
                        <div class="export-csv"></div>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <table id="sproduct1" class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th>Matching</th>
                                    <th>Favicon</th>
                                    <th>Eretailer</th>
                                    <th>status</th>
                                    <th>img</th>
                                    <th>Title</th>
                                    <th>Prod.<br />Price</th>
                                    <th>Diff. €</th>
                                    <th>Diff. %</th>
                                    <th>Shipp<br/>ing</th>
                                    <th>Total<br/>Price</th>
                                    <th class="price_time" data-orderable="false">Price<br/>History</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><i class="fa fa-circle text-green"></i>Match</td>
                                    <td><img src="{{ asset('bundles/mydatalabadmin/img/products/sephora_fav.png') }}" alt="Sephora" height="60" width="60"></td>
                                    <td>Sephora.com</td>
                                    <td><i class="fa fa-minus text-red"></td>
                                    <td><img src="{{ asset('bundles/mydatalabadmin/img/products/lacoste_sm.png') }}" alt="LaCoste" height="60" width="60">
                                    <td>Perfume 1 -<br /> Lacoste</td>
                                    <td><span class="text-green">60,95 €</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-green">+2 €</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-green">+3,7 %</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-blue">6 €</span></td>
                                    <td><span class="text-red">10 €</span></td>
                                    <td><span id="product_chart_div3" style="width:200px"></span></td>
                                </tr>
                                <tr>
                                    <td><i class="fa fa-circle text-green"></i>Match</td>
                                    <td><img src="{{ asset('bundles/mydatalabadmin/img/products/marionnaud_fav.png') }}" alt="Marionnaud" height="60" width="60"></td>
                                    <td>Marionnaud.fr</td>
                                    <td><i class="fa fa-plus text-green"></td>
                                    <td><img src="{{ asset('bundles/mydatalabadmin/img/products/lacoste_sm.png') }}" alt="LaCoste" height="60" width="60">
                                    <td>Parfum 1 150<br />mL -Lacoste</td>
                                    <td><span class="text-green">60,90 €</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-green">+2 €</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-green">+3,5 %</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-blue">8 €</span></td>
                                    <td><span class="text-red">10 €</span></td>
                                    <td><span id="product_chart_div4" style="width:200px"></span></td>
                                </tr>
                                <tr>
                                    <td><i class="fa fa-circle text-yellow"></i>Wait</td>
                                    <td><img src="{{ asset('bundles/mydatalabadmin/img/products/sephora_fav.png') }}" alt="Sephora" height="60" width="60">
                                    </td>
                                    <td>Sephora</td>
                                    <td><i class="fa fa-minus text-red"></td>
                                    <td><img src="{{ asset('bundles/mydatalabadmin/img/products/lacoste_sm.png') }}" alt="LaCoste" height="60" width="60">
                                    <td>Perfume 1 -<br /> Lacoste</td>
                                    <td><span class="text-green">60,80 €</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-green">+2 €</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-green">+4,5 %</span> <i class="fa fa-long-arrow-up text-green"></i></td>
                                    <td><span class="text-blue">9 €</span></td>
                                    <td><span class="text-red">10 €</span></td>
                                    <td><span id="product_chart_div5" style="width:200px"></span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    {{ parent() }}
    <script type="text/javascript">
        google.load('visualization', '1', {packages: ['corechart']});
        google.charts.setOnLoadCallback(drawChart2);
        google.charts.setOnLoadCallback(drawChart3);
        function drawChart2() {
            var data2 = google.visualization.arrayToDataTable(
                    [
                        ['Week', 'Monstore.com', 'Sephora.com', 'Marionnaud.fr', 'Monparfum.com', 'Parfumerieici.fr'],
                        ['1', 2.82, 1.145, 0, 2.71, 18.44],
                        ['2', 3.29, 4, 0, 3.01, 29.38],
                        ['3', 5.84, 0.04, 0, 3.29, 26.05],
                        ['4', 7.08, 0, 10, 3.54, 13.09],
                        ['5', 9.38, 0, 0, 3.90, 7.59],
                        ['6', 26.01, 0, 11, 4.32, 3.92],
                        ['7', 10.65, 0, 0, 4.69, 1.70],
                        ['8', 11.86, 0, 0, 4.93, 1.31],
                        ['9', 41, 0, 0, 5.31, 0.79]
                    ]);

            var options2 = {

                width: '100%',
                height: '100%',
                hAxis: {title: 'Week', titleTextStyle: {color: 'black'}},
                vAxis: {title: '€', titleTextStyle: {color: 'black'}}

            };

            var chart2 = new google.visualization.AreaChart(document.getElementById('product_chart_div2'));
            chart2.draw(data2, options2);
        }
        function drawChart3() {
            var data3 = google.visualization.arrayToDataTable(
                    [
                        ['Week', 'Monstore.com', 'Sephora.com', 'Marionnaud.fr', 'Monparfum.com', 'Parfumerieici.fr'],
                        ['Week 1', 2.82, 1.145, 0, 2.71, 18.44],
                        ['Week 2', 3.29, 4, 0, 3.01, 29.38],
                        ['Week 3', 5.84, 0.04, 0, 3.29, 26.05],
                        ['Week 4', 7.08, 0, 10, 3.54, 13.09],
                        ['Week 5', 9.38, 0, 0, 3.90, 7.59],
                        ['Week 6', 26.01, 0, 11, 4.32, 3.92],
                        ['Week 7', 10.65, 0, 0, 4.69, 1.70],
                        ['Week 8', 11.86, 0, 0, 4.93, 1.31],
                        ['Week 9', 41, 0, 0, 5.31, 0.79]
                    ]);

            var options3 = {
                chartArea: {width: '80%', height: '80%'},
                width: 200,
                height: 50,
                hAxis: {title: 'Week', titleTextStyle: {color: 'black'}},
                vAxis: {title: '€', titleTextStyle: {color: 'black'}}

            };

            var chart3 = new google.visualization.AreaChart(document.getElementById('product_chart_div3'));
            chart3.draw(data3, options3);
            var chart4 = new google.visualization.AreaChart(document.getElementById('product_chart_div4'));
            chart4.draw(data3, options3);
            var chart5 = new google.visualization.AreaChart(document.getElementById('product_chart_div5'));
            chart5.draw(data3, options3);
        }

    </script>
    <!-- page script -->
    <script>
        $(function () {
            $("#sproduct1").DataTable();
        });
    </script>
    <script>
        $(function () {
            //INITIALIZE SPARKLINE CHARTS
            $(".sparkline").each(function () {
                var $this = $(this);
                $this.sparkline('html', $this.data());
            });
            /* SPARKLINE DOCUMENTATION EXAMPLES http://omnipotent.net/jquery.sparkline/#s-about */
            drawDocSparklines();
            drawMouseSpeedDemo();
        });
        function drawDocSparklines() {
            // Bar + line composite charts
            $('#compositebar').sparkline('html', {type: 'bar', barColor: '#aaf'});
            $('#compositebar').sparkline([4, 1, 5, 7, 9, 9, 8, 7, 6, 6, 4, 7, 8, 4, 3, 2, 2, 5, 6, 7],
                    {composite: true, fillColor: false, lineColor: 'red'});
            // Line charts taking their values from the tag
            $('.sparkline-1').sparkline();
            $("#sparkline2").sparkline([1, 1, 0, 1, -1, -1, 1, -1, 0, 0, 1, 1], {
                type: 'tristate',
                height: '150px',
                barWidth: 18,
                barSpacing: 2});


            // Tri-state charts using inline values
            $('span.sparktristate').each(function (i, n) {
                $(n).addClass('count' + (i + 1));
            });
            $('.sparktristate').sparkline('html', {type: 'tristate'});
            $('.sparktristate2').sparkline('html', {type: 'tristate'});
            $('.sparktristatecols').sparkline('html',
                    {type: 'tristate', colorMap: {'-2': '#fa7', '2': '#44f'}});

            // Composite line charts, the second using values supplied via javascript
            $('#compositeline').sparkline('html', {fillColor: false, changeRangeMin: 0, chartRangeMax: 10});
            $('#compositeline').sparkline([4, 1, 5, 7, 9, 9, 8, 7, 6, 6, 4, 7, 8, 4, 3, 2, 2, 5, 6, 7],
                    {composite: true, fillColor: false, lineColor: 'red', changeRangeMin: 0, chartRangeMax: 10});
            $('#compositeline2').sparkline('html', {fillColor: false, changeRangeMin: 0, chartRangeMax: 10});
            $('#compositeline2').sparkline([4, 1, 5, 7, 9, 9, 8, 7, 6, 6, 4, 7, 8, 4, 3, 2, 2, 5, 6, 7],
                    {composite: true, fillColor: false, lineColor: 'red', changeRangeMin: 0, chartRangeMax: 10});
            $('#compositeline2').sparkline([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                    {composite: true, fillColor: false, lineColor: 'yellow', changeRangeMin: 0, chartRangeMax: 10});

            $('#compositeline3').sparkline('html', {fillColor: false, changeRangeMin: 0, chartRangeMax: 10});
            $('#compositeline3').sparkline([4, 1, 5, 7, 9, 9, 8, 7, 6, 6, 4, 7, 8, 4, 3, 2, 2, 5, 6, 7],
                    {composite: true, fillColor: false, lineColor: 'red', changeRangeMin: 0, chartRangeMax: 10});
            $('#compositeline3').sparkline([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                    {composite: true, fillColor: false, lineColor: 'yellow', changeRangeMin: 0, chartRangeMax: 10});
            // click event demo sparkline
            $('.clickdemo').sparkline();
            $('.clickdemo').bind('sparklineClick', function (ev) {
                var sparkline = ev.sparklines[0],
                        region = sparkline.getCurrentRegionFields();
                value = region.y;
                alert("Clicked on x=" + region.x + " y=" + region.y);
            });

            // mouseover event demo sparkline
            $('.mouseoverdemo').sparkline();
            $('.mouseoverdemo').bind('sparklineRegionChange', function (ev) {
                var sparkline = ev.sparklines[0],
                        region = sparkline.getCurrentRegionFields();
                value = region.y;
                $('.mouseoverregion').text("x=" + region.x + " y=" + region.y);
            }).bind('mouseleave', function () {
                $('.mouseoverregion').text('');
            });
        }

        /**
         ** Draw the little mouse speed animated graph
         ** This just attaches a handler to the mousemove event to see
         ** (roughly) how far the mouse has moved
         ** and then updates the display a couple of times a second via
         ** setTimeout()
         **/
        function drawMouseSpeedDemo() {
            var mrefreshinterval = 500; // update display every 500ms
            var lastmousex = -1;
            var lastmousey = -1;
            var lastmousetime;
            var mousetravel = 0;
            var mpoints = [];
            var mpoints_max = 30;
            $('html').mousemove(function (e) {
                var mousex = e.pageX;
                var mousey = e.pageY;
                if (lastmousex > -1) {
                    mousetravel += Math.max(Math.abs(mousex - lastmousex), Math.abs(mousey - lastmousey));
                }
                lastmousex = mousex;
                lastmousey = mousey;
            });
            var mdraw = function () {
                var md = new Date();
                var timenow = md.getTime();
                if (lastmousetime && lastmousetime != timenow) {
                    var pps = Math.round(mousetravel / (timenow - lastmousetime) * 1000);
                    mpoints.push(pps);
                    if (mpoints.length > mpoints_max)
                        mpoints.splice(0, 1);
                    mousetravel = 0;
                    $('#mousespeed').sparkline(mpoints, {width: mpoints.length * 2, tooltipSuffix: ' pixels per second'});
                }
                lastmousetime = timenow;
                setTimeout(mdraw, mrefreshinterval);
            };
            // We could use setInterval instead, but I prefer to do it this way
            setTimeout(mdraw, mrefreshinterval);
        }
        //Restore default list + redraw google charts
        $('body').on('click', '.restore-scenarios', function () {
            $(".ui-sortable").each(function (index, anchor) {
                anchor.innerHTML = initial[index];
                drawChart3();
                drawChart2();
            });
        });
        //Fix for google charts drag and drop 
        $(".ui-sortable").sortable({
            update: function () {
                drawChart3();
                drawChart2();
            }
        });
        //Fix for google charts on window resize
        $(window).resize(function () {
            drawChart3();
            drawChart2();
        });
    </script>
{% endblock %}